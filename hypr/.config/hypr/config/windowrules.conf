#################################
### HYPRLAND WINDOW RULES CONFIGURATION ###
#################################
# Reference: https://wiki.hyprland.org/Configuring/Window-Rules/

### WINDOW RULE GROUPS ###
# Common dialog windows (file pickers, auth prompts)
$dialogs = match:title ^(Install from VSIX|Downloading Certificate|Open File|Save File|Save As|Open Folder|File Upload|Enter name of file to save to..|Authentication Required|Create or select new Steam library folder|About Zen Browser)(.*)$

# System utilities and settings dialogs
$systemUtils = match:class ^(com.saivert.pwvucontrol|gtk-pipe-viewer|org.pulseaudio.pavucontrol|blueman-manager|org.gnome.DiskUtility|nm-connection-editor|gnome-calculator|org.gnome.Calculator|xdg-desktop-portal.*|polkit.*authentication-agent.*|zenity|pavucontrol)$

# Media viewers and players
$mediaViewers = match:title ^(imv|mpv|danmufloat|termfloat|nemo|ncmpcpp)$

# Picture-in-picture windows
$pipWindows = match:title ^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)(.*)$

# Steam-related dialogs
$steamDialogs = match:class ^(steam)$, match:title ^(Steam - Self Updater|Steam Settings|Create or select new Steam library folder)$

# Utility applications that should float
$floatingApps = match:class ^(waypaper|io.missioncenter.MissionCenter|mpv)$

# Other common dialog patterns
$otherDialogs = match:title ^(OpenRGB|Network Connections|Do you want to retry your last request)


workspace = 1, on-created-empty:zen-browser
workspace = 2, on-created-empty:chromium
workspace = 3, on-created-empty:cursor
workspace = special:vesktop, on-created-empty:vesktop
workspace = special:telegram, on-created-empty:Telegram
workspace = special:slack, on-created-empty:slack
workspace = special:terminal, on-created-empty:$terminal


windowrule = size 15%, match:class ^(gnome-calculator|org.gnome.Calculator)$

### WORKSPACE ASSIGNMENTS ###
# Workspace 1-2: Browsers
windowrule = workspace 1, match:class ^(zen-browser|zen)$
windowrule = workspace 2, match:class ^(chromium)$

# Workspace 3-4: Development
windowrule = workspace 3, match:class ^([Cc]ode|code-url-handler|[Cc]ursor|cursor-url-handler|Cursor-url-handler)$

# Workspace 5: Downloads
windowrule = workspace 5, match:class ^(qbittorrent)$

# Workspace 6: Gaming
windowrule = workspace 6, match:class ^(steam_app_0|steam_app_1)$

# Workspace 7: Email
windowrule = workspace 7, match:class ^(thunderbird)$

# Scratchpad workspaces for communication apps
windowrule = workspace special:telegram, match:class ^(org.telegram.desktop|Telegram|telegram-desktop)$
windowrule = workspace special:vesktop, match:class ^(vesktop)$
windowrule = workspace special:slack, match:class ^(Slack|slack-desktop)$


### FLOATING WINDOW RULES ###

windowrule = float on, match:class org.kde.kdeconnect.handler

# System utilities & dialogs
windowrule = float on, $systemUtils
windowrule = size 60%, $systemUtils

# Global Updates dialog
windowrule = float on, match:title .*Global Updates.*
windowrule = center on, match:title .*Global Updates.*
windowrule = size 1600 900, match:title .*Global Updates.*

# Floating applications
windowrule = float on, $floatingApps
windowrule = size 60%, $floatingApps

# File dialogs & authentication
windowrule = float on, $dialogs
windowrule = size 45%, $dialogs

# Nautilus file dialogs
windowrule = float on, match:class ^(org.gnome.Nautilus)$, match:title ^(Select File containing CA certificate.*)$

# Special dialogs
windowrule = float on, match:title ^(OpenRGB)$
windowrule = float on, match:title ^(Network Connections)$
windowrule = float on, match:title ^(Do you want to retry your last request\?)$
windowrule = float on, match:class ^(Code|Cursor)$, match:title ^(Do you want to retry your last request)
windowrule = float on, match:class ^blender$, match:initial_title ^Blender$

# Steam dialogs
windowrule = float on, $steamDialogs
windowrule = size 1600 900, match:title ^(Create or select new Steam library folder)$

# Picture-in-Picture windows
windowrule = float on, $pipWindows
windowrule = pin on, $pipWindows
windowrule = keep_aspect_ratio on, $pipWindows
windowrule = size 960 540, $pipWindows
windowrule = move 25%-, $pipWindows

# Media viewers
windowrule = float on, $mediaViewers
windowrule = size 60%, $mediaViewers
windowrule = pin on, match:title ^(danmufloat)$

### VISUAL RULES ###
windowrule = no_shadow on, match:float no
windowrule = suppress_event maximize, match:class .*

### GAMING RULES ###
windowrule = idle_inhibit fullscreen, match:title .*
windowrule = immediate on, match:fullscreen yes
windowrule = no_blur on, match:fullscreen yes
windowrule = no_anim on, match:fullscreen yes

### LAYER RULES ###
layerrule = animation slide down, match:namespace waybar
layerrule = animation fade, match:namespace wallpaper
layerrule = blur on, match:namespace wofi
layerrule = ignore_alpha 0, match:namespace wofi
layerrule = blur on, match:namespace notifications
layerrule = ignore_alpha 0, match:namespace notifications

layerrule = blur on, match:namespace eww
layerrule = ignore_alpha 0, match:namespace eww
layerrule = blur on, match:namespace eww1
layerrule = ignore_alpha 0, match:namespace eww1
layerrule = blur on, match:namespace eww2
layerrule = ignore_alpha 0, match:namespace eww2
layerrule = blur on, match:namespace eww3
layerrule = ignore_alpha 0, match:namespace eww3
layerrule = blur on, match:namespace rofi
layerrule = ignore_alpha 0, match:namespace rofi
layerrule = blur on, match:namespace logout_dialog
layerrule = blur on, match:namespace gtk-layer-shell
layerrule = ignore_alpha 0, match:namespace gtk-layer-shell
layerrule = blur on, match:namespace nwg-dock
layerrule = ignore_alpha 0, match:namespace nwg-dock
layerrule = order 1, match:namespace eww1
layerrule = order 2, match:namespace eww2
layerrule = order 3, match:namespace eww3
layerrule = order 3, match:namespace rofi
