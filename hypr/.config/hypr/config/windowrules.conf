# Reference: https://wiki.hyprland.org/Configuring/Window-Rules/
# Syntax: Hyprland 0.5.3 (match:* props + effects)

### SIZE VARIABLES ###
$size_large = (monitor_w*0.6) (monitor_h*0.6)
$size_medium = (monitor_w*0.45) (monitor_h*0.45)
$size_small = (monitor_w*0.3) (monitor_h*0.3)
$size_tiny = (monitor_w*0.15) (monitor_h*0.15)
$size_pip = 960 540


### REGEX VARIABLES ###

# Dialogs (Title based)
$dialogs = match:title ^(Install from VSIX|Downloading Certificate|Open File|Save File|Save As|Open Folder|File Upload|Enter name of file to save to\.\.|Authentication Required|Create or select new Steam library folder|About Zen Browser)

# System Utilities (Class based)
$systemUtils = match:class ^(com\.saivert\.pwvucontrol|org\.pulseaudio\.pavucontrol|pavucontrol|gtk-pipe-viewer|blueman-manager|nm-connection-editor|org\.gnome\.DiskUtility|gnome-calculator|org\.gnome\.Calculator|xdg-desktop-portal.*|polkit.*|zenity)$

# Media & Visuals
$mediaViewers = match:title ^(imv|mpv|danmufloat|termfloat|nemo|ncmpcpp)$
$pipWindows = match:title (?i)^picture.?in.?picture

# Steam Specific
$steamDialogs = match:class ^steam$, match:title ^(Steam - Self Updater|Steam Settings|Create or select new Steam library folder)$

# Floating Apps (Always Float)
$floatingApps = match:class ^(waypaper|io\.missioncenter\.MissionCenter|mpv)$


### WORKSPACE AUTO-LAUNCH ###
workspace = 1, on-created-empty:zen-browser
workspace = 2, on-created-empty:chromium
workspace = 3, on-created-empty:cursor
workspace = special:vesktop, on-created-empty:vesktop
workspace = special:telegram, on-created-empty:Telegram
workspace = special:slack, on-created-empty:slack
workspace = special:terminal, on-created-empty:$terminal


### WORKSPACE ASSIGNMENTS ###
# Browsers
windowrule = workspace 1, match:class ^(zen-browser|zen)$
windowrule = workspace 2, match:class ^chromium$

# Development
windowrule = workspace 3, match:class ^([Cc]ode|[Cc]ursor)(-url-handler)?$

# Utility
windowrule = workspace 5, match:class ^qbittorrent$
windowrule = workspace 7, match:class ^thunderbird$

# Gaming
windowrule = workspace 5, match:class ^steam_app_[01]$

# Communication (Scratchpads)
windowrule = workspace special:telegram, match:class ^(org\.telegram\.desktop|[Tt]elegram(-desktop)?)$
windowrule = workspace special:vesktop, match:class ^vesktop$
windowrule = workspace special:slack, match:class ^[Ss]lack(-desktop)?$


### WINDOW GEOMETRY & BEHAVIOR ###

# 1. General Floating Logic
windowrule = $systemUtils, float on, center on, size $size_large
windowrule = $floatingApps, float on, center on, size $size_large
windowrule = $dialogs, float on, center on, size $size_medium

# 2. Specific App Tweaks
windowrule = match:class ^org\.gnome\.Nautilus$, match:title ^Select File containing CA certificate, float on, center on, size $size_medium
windowrule = match:title .*Global Updates.*, float on, center on, size 1600 900
windowrule = match:class ^org\.kde\.kdeconnect\.handler$, float on, center on, size $size_small
windowrule = match:class ^(gnome-calculator|org\.gnome\.Calculator)$, float on, center on, size $size_tiny
windowrule = match:class ^blender$, match:initial_title ^Blender$, float on, size $size_large

# 3. Connection & Retry Dialogs
windowrule = match:title ^(OpenRGB|Network Connections|Do you want to retry your last request\?)$, float on, center on, size $size_large
windowrule = match:class ^(Code|Cursor)$, match:title ^Do you want to retry your last request, float on, center on, size $size_small

# 4. Steam Dialogs
windowrule = $steamDialogs, float on, center on, size $size_medium
windowrule = match:title ^Create or select new Steam library folder$, size 1600 900

# 5. Media & Picture-in-Picture
windowrule = $mediaViewers, float on, size $size_large
windowrule = match:title ^danmufloat$, pin on, center on, size $size_medium
windowrule = $pipWindows, float on, pin on, keep_aspect_ratio on, size $size_pip, move (monitor_w-window_w-(monitor_w*0.02)) (monitor_h-window_h-(monitor_h*0.02))


### VISUAL & GAMING RULES ###
# Visual
windowrule = match:float false, no_shadow on
windowrule = match:class .*, suppress_event maximize

# Gaming & Performance
windowrule = match:class ^steam_app_, fullscreen on, immediate on
windowrule = match:fullscreen true, no_blur on, no_anim on
windowrule = match:title .*, idle_inhibit fullscreen
