#!/usr/bin/env bash

BACKUP_DIR="/mnt/Work/Home_backup/"

if [[ "$1" == "--restore" || "$1" == "-r" ]]; then
  echo "Restoring from $BACKUP_DIR to ~..."
  cd "$BACKUP_DIR" && rsync -avR --stats . ~
else
  echo "Backing up ~ to $BACKUP_DIR..."
  cd ~ && rsync -avR --stats --delete \
    --exclude='*.tmp' \
    --exclude='*.log' \
    --exclude='*.cache' \
    --exclude='*.bak' \
    --exclude='*.swp' \
    --exclude='*.swo' \
    --exclude='*~' \
    --exclude='.DS_Store' \
    .ssh \
    .local/share/gnupg \
    .gemini \
    .config/Code \
    .vscode \
    .local/share/cargo \
    .rustup \
    .local/share/fnm \
    .config/composer \
    .config/github-copilot \
    .zen \
    .thunderbird \
    .config/Slack \
    .config/vesktop \
    .local/share/TelegramDesktop \
    .config/zed \
    .local/share/zed \
    .themes \
    .config/gtk-2.0 \
    .config/gtk-3.0 \
    .config/gtk-4.0 \
    .config/Kvantum \
    .config/qt5ct \
    .config/qt6ct \
    .config/qBittorrent \
    .local/share/opencode \
    .config/user-dirs.dirs \
    "$BACKUP_DIR"
fi
